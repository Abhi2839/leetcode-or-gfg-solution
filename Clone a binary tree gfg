/* A binary tree node has data, pointer to left child
   and a pointer to right child
struct Node
{
    int data;
    Node* left;
    Node* right;
    Node *random;
};
*/
class Solution {
  public:
    /* The function should clone the passed tree and return
       root of the cloned tree */
Node* copy(Node*root,unordered_map<Node*,Node*>&mp){
    if (root==nullptr) return nullptr;
    Node*newnode=new Node(root->data);
    mp[root]=newnode;
    newnode->left=copy(root->left,mp);
    newnode->right=copy(root->right,mp);
    return newnode;
}
void random(Node*root,unordered_map<Node*,Node*>&mp){
    if (root==nullptr) return;
    mp[root]->random=mp[root->random];
    random(root->left,mp);
    random(root->right,mp);
}
    Node* cloneTree(Node* root) {
    unordered_map<Node*,Node*>mp;
    if (root==nullptr) return nullptr;
    Node*ans=copy(root,mp);
    random(root,mp);
    return ans;
    }
};
